#!/usr/bin/env bash
# Builds the project
set -euo pipefail
START_TIME=$(date +%s.%N)
SCRIPT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"
cd "$SCRIPT_DIR/.."

# Use iPhone 16 Pro with iOS 18.5
SIMULATOR_ID="C692F47B-CF1C-400E-956D-B22E3079BF40"

echo "ðŸ”¨ Building app..."
xcodebuild \
    -project App/Habitual.xcodeproj \
    -scheme App \
    -configuration Debug \
    -destination "platform=iOS Simulator,arch=arm64,id=$SIMULATOR_ID" \
    -parallelizeTargets \
    -jobs "$(sysctl -n hw.ncpu)" \
    CODE_SIGNING_ALLOWED=NO \
    -quiet \
    build

END_TIME=$(date +%s.%N)
ELAPSED_TIME=$(echo "$END_TIME - $START_TIME" | bc --mathlib | xargs printf "%.2f\n")
echo "âœ… Build completed in $ELAPSED_TIME seconds!"
