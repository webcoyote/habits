#!/usr/bin/env bash
set -euo pipefail
SCRIPT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"
cd "$SCRIPT_DIR/.."

# Defining HEREDOCS "almost just like" Ruby
# http://ss64.com/bash/read.html
# http://stackoverflow.com/questions/1167746/how-to-assign-a-heredoc-value-to-a-variable-in-bash
# Example:
# heredoc MESSAGE << EOF
#    your favorite text here
# EOF
heredoc(){ IFS=$'\n' read -r -d '' "${1}" || true; }

warn () {
  echo >&2 -e "\033[33m$@\033[0m"
}

heredoc PROMPT << EOF
    Never use pleasantries, validation, or congratulatory language
EOF

warn "Running claude with --dangerously-skip-permissions and PROMPT"
"$(brew --prefix)/bin/claude" --dangerously-skip-permissions --append-system-prompt "$PROMPT" "$@"
